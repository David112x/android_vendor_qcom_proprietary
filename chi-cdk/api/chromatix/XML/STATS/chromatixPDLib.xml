<?xml version="1.0" encoding="utf-8" ?>
<!--
========================================================================
   Copyright(c) 2017-2019 Qualcomm Technologies, Inc.
   All Rights Reserved.
   Confidential and Proprietary - Qualcomm Technologies, Inc.
========================================================================
-->
<chromatixPDLib
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:noNamespaceSchemaLocation="..\..\xsd\stats\af\afpdlibelements.xsd">
  <module_version major_revision="9" minor_revision="0" incr_revision="0"/>
  <parameter_version>
    <revision>"A"</revision>
  </parameter_version>
  <preProcess>
    <sparseProcessingMode>SPARSE_PD_PROC_SIMPLE</sparseProcessingMode>
    <HDR>
      <channelSelection>DPD_HDR_AUTO_MODE</channelSelection>
      <longThreshold>450</longThreshold>
    </HDR>
    <boxFilterLength>2</boxFilterLength>
    <antiAliasFilterThreshold>100</antiAliasFilterThreshold>
    <saturationThreshold>5000</saturationThreshold>
    <filterTrigger>
      <filterSet>
        <AECTrigger>
          <lux_idx_start>0</lux_idx_start>
          <lux_idx_end>0</lux_idx_end>
          <gain_start>8</gain_start>
          <gain_end>8</gain_end>
        </AECTrigger>
        <verticalMode>8</verticalMode>
        <horizontalMode>1</horizontalMode>
        <boxFilterLength>2</boxFilterLength>
        <antiAliasFilterThreshold>100</antiAliasFilterThreshold>
      </filterSet>
      <filterSet>
        <AECTrigger>
          <lux_idx_start>0</lux_idx_start>
          <lux_idx_end>0</lux_idx_end>
          <gain_start>4</gain_start>
          <gain_end>4</gain_end>
        </AECTrigger>
        <verticalMode>4</verticalMode>
        <horizontalMode>1</horizontalMode>
        <boxFilterLength>2</boxFilterLength>
        <antiAliasFilterThreshold>100</antiAliasFilterThreshold>
      </filterSet>
      <filterSet>
        <AECTrigger>
          <lux_idx_start>0</lux_idx_start>
          <lux_idx_end>0</lux_idx_end>
          <gain_start>1</gain_start>
          <gain_end>1</gain_end>
        </AECTrigger>
        <verticalMode>4</verticalMode>
        <horizontalMode>1</horizontalMode>
        <boxFilterLength>2</boxFilterLength>
        <antiAliasFilterThreshold>100</antiAliasFilterThreshold>
      </filterSet>
    </filterTrigger>
    <lcrFilterTrigger>
      <filterSet>
        <AECTrigger>
          <lux_idx_start>0</lux_idx_start>
          <lux_idx_end>0</lux_idx_end>
          <gain_start>8</gain_start>
          <gain_end>8</gain_end>
        </AECTrigger>
        <verticalMode>1</verticalMode>
        <horizontalMode>2</horizontalMode>
        <boxFilterLength>0</boxFilterLength>
        <antiAliasFilterThreshold>0</antiAliasFilterThreshold>
      </filterSet>
      <filterSet>
        <AECTrigger>
          <lux_idx_start>0</lux_idx_start>
          <lux_idx_end>0</lux_idx_end>
          <gain_start>4</gain_start>
          <gain_end>4</gain_end>
        </AECTrigger>
        <verticalMode>1</verticalMode>
        <horizontalMode>2</horizontalMode>
        <boxFilterLength>0</boxFilterLength>
        <antiAliasFilterThreshold>0</antiAliasFilterThreshold>
      </filterSet>
      <filterSet>
        <AECTrigger>
          <lux_idx_start>0</lux_idx_start>
          <lux_idx_end>0</lux_idx_end>
          <gain_start>1</gain_start>
          <gain_end>1</gain_end>
        </AECTrigger>
        <verticalMode>1</verticalMode>
        <horizontalMode>2</horizontalMode>
        <boxFilterLength>0</boxFilterLength>
        <antiAliasFilterThreshold>0</antiAliasFilterThreshold>
      </filterSet>
    </lcrFilterTrigger>
    <lcrChannel>PDAF_LCR_CHANNEL_G</lcrChannel>
    <lcrBinningMode>PDAF_LCR_BINNING_DEFAULT</lcrBinningMode>
    <lcrRawType>PDAF_CAMIF_RAW</lcrRawType>
    <lcrMaxBinningNum>1</lcrMaxBinningNum>
    <lcrChannelSeparated>false</lcrChannelSeparated>
  </preProcess>
  <preProcessVertical>
    <sparseProcessingMode>SPARSE_PD_PROC_SIMPLE</sparseProcessingMode>
    <HDR>
      <channelSelection>DPD_HDR_AUTO_MODE</channelSelection>
      <longThreshold>450</longThreshold>
    </HDR>
    <boxFilterLength>2</boxFilterLength>
    <antiAliasFilterThreshold>100</antiAliasFilterThreshold>
    <saturationThreshold>5000</saturationThreshold>
    <filterTrigger>
      <filterSet>
        <AECTrigger>
          <lux_idx_start>0</lux_idx_start>
          <lux_idx_end>0</lux_idx_end>
          <gain_start>8</gain_start>
          <gain_end>8</gain_end>
        </AECTrigger>
        <verticalMode>8</verticalMode>
        <horizontalMode>1</horizontalMode>
        <boxFilterLength>2</boxFilterLength>
        <antiAliasFilterThreshold>100</antiAliasFilterThreshold>
      </filterSet>
      <filterSet>
        <AECTrigger>
          <lux_idx_start>0</lux_idx_start>
          <lux_idx_end>0</lux_idx_end>
          <gain_start>4</gain_start>
          <gain_end>4</gain_end>
        </AECTrigger>
        <verticalMode>4</verticalMode>
        <horizontalMode>1</horizontalMode>
        <boxFilterLength>2</boxFilterLength>
        <antiAliasFilterThreshold>100</antiAliasFilterThreshold>
      </filterSet>
      <filterSet>
        <AECTrigger>
          <lux_idx_start>0</lux_idx_start>
          <lux_idx_end>0</lux_idx_end>
          <gain_start>1</gain_start>
          <gain_end>1</gain_end>
        </AECTrigger>
        <verticalMode>4</verticalMode>
        <horizontalMode>1</horizontalMode>
        <boxFilterLength>2</boxFilterLength>
        <antiAliasFilterThreshold>100</antiAliasFilterThreshold>
      </filterSet>
    </filterTrigger>
    <lcrFilterTrigger>
      <filterSet>
        <AECTrigger>
          <lux_idx_start>0</lux_idx_start>
          <lux_idx_end>0</lux_idx_end>
          <gain_start>8</gain_start>
          <gain_end>8</gain_end>
        </AECTrigger>
        <verticalMode>1</verticalMode>
        <horizontalMode>2</horizontalMode>
        <boxFilterLength>0</boxFilterLength>
        <antiAliasFilterThreshold>0</antiAliasFilterThreshold>
      </filterSet>
      <filterSet>
        <AECTrigger>
          <lux_idx_start>0</lux_idx_start>
          <lux_idx_end>0</lux_idx_end>
          <gain_start>4</gain_start>
          <gain_end>4</gain_end>
        </AECTrigger>
        <verticalMode>1</verticalMode>
        <horizontalMode>2</horizontalMode>
        <boxFilterLength>0</boxFilterLength>
        <antiAliasFilterThreshold>0</antiAliasFilterThreshold>
      </filterSet>
      <filterSet>
        <AECTrigger>
          <lux_idx_start>0</lux_idx_start>
          <lux_idx_end>0</lux_idx_end>
          <gain_start>1</gain_start>
          <gain_end>1</gain_end>
        </AECTrigger>
        <verticalMode>1</verticalMode>
        <horizontalMode>2</horizontalMode>
        <boxFilterLength>0</boxFilterLength>
        <antiAliasFilterThreshold>0</antiAliasFilterThreshold>
      </filterSet>
    </lcrFilterTrigger>
    <lcrChannel>PDAF_LCR_CHANNEL_G</lcrChannel>
    <lcrBinningMode>PDAF_LCR_BINNING_DEFAULT</lcrBinningMode>
    <lcrRawType>PDAF_CAMIF_RAW</lcrRawType>
    <lcrMaxBinningNum>1</lcrMaxBinningNum>
    <lcrChannelSeparated>false</lcrChannelSeparated>
  </preProcessVertical>
  <correlation>
    <minimumConfidenceLevel>250</minimumConfidenceLevel>
    <defocusConfidenceThreshold>250</defocusConfidenceThreshold>
    <PDRangeControl>0.1</PDRangeControl>
    <searchRange>
      <from>-48</from>
      <to>16</to>
    </searchRange>
    <lcrSearchRange>
      <from>-8</from>
      <to>8</to>
    </lcrSearchRange>
  </correlation>
  <correlationVertical>
    <minimumConfidenceLevel>250</minimumConfidenceLevel>
    <defocusConfidenceThreshold>250</defocusConfidenceThreshold>
    <PDRangeControl>0.1</PDRangeControl>
    <searchRange>
      <from>-48</from>
      <to>16</to>
    </searchRange>
    <lcrSearchRange>
      <from>-8</from>
      <to>8</to>
    </lcrSearchRange>
  </correlationVertical>
  <postProcess>
    <biasVectorStrength>0.1</biasVectorStrength>
    <temporalFilterStaticWeight>0.5</temporalFilterStaticWeight>
    <temporalFilterDynamicWeight>1</temporalFilterDynamicWeight>
    <temporalFilterTrigger>
      <temporalFilterSet>
        <AECTrigger>
          <lux_idx_start>0</lux_idx_start>
          <lux_idx_end>0</lux_idx_end>
          <gain_start>8</gain_start>
          <gain_end>8</gain_end>
        </AECTrigger>
        <dynamicWeight>1</dynamicWeight>
        <staticWeight>1</staticWeight>
      </temporalFilterSet>
      <temporalFilterSet>
        <AECTrigger>
          <lux_idx_start>0</lux_idx_start>
          <lux_idx_end>0</lux_idx_end>
          <gain_start>4</gain_start>
          <gain_end>4</gain_end>
        </AECTrigger>
        <dynamicWeight>1</dynamicWeight>
        <staticWeight>1</staticWeight>
      </temporalFilterSet>
      <temporalFilterSet>
        <AECTrigger>
          <lux_idx_start>0</lux_idx_start>
          <lux_idx_end>0</lux_idx_end>
          <gain_start>1</gain_start>
          <gain_end>1</gain_end>
        </AECTrigger>
        <dynamicWeight>1</dynamicWeight>
        <staticWeight>1</staticWeight>
      </temporalFilterSet>
    </temporalFilterTrigger>
    <enableGridOverlap>1</enableGridOverlap>
    <confIntegralWidth>24</confIntegralWidth>
  </postProcess>
  <postProcessVertical>
    <biasVectorStrength>0.1</biasVectorStrength>
    <temporalFilterStaticWeight>0.5</temporalFilterStaticWeight>
    <temporalFilterDynamicWeight>1</temporalFilterDynamicWeight>
    <temporalFilterTrigger>
      <temporalFilterSet>
        <AECTrigger>
          <lux_idx_start>0</lux_idx_start>
          <lux_idx_end>0</lux_idx_end>
          <gain_start>8</gain_start>
          <gain_end>8</gain_end>
        </AECTrigger>
        <dynamicWeight>1</dynamicWeight>
        <staticWeight>1</staticWeight>
      </temporalFilterSet>
      <temporalFilterSet>
        <AECTrigger>
          <lux_idx_start>0</lux_idx_start>
          <lux_idx_end>0</lux_idx_end>
          <gain_start>4</gain_start>
          <gain_end>4</gain_end>
        </AECTrigger>
        <dynamicWeight>1</dynamicWeight>
        <staticWeight>1</staticWeight>
      </temporalFilterSet>
      <temporalFilterSet>
        <AECTrigger>
          <lux_idx_start>0</lux_idx_start>
          <lux_idx_end>0</lux_idx_end>
          <gain_start>1</gain_start>
          <gain_end>1</gain_end>
        </AECTrigger>
        <dynamicWeight>1</dynamicWeight>
        <staticWeight>1</staticWeight>
      </temporalFilterSet>
    </temporalFilterTrigger>
    <enableGridOverlap>1</enableGridOverlap>
    <confIntegralWidth>24</confIntegralWidth>
  </postProcessVertical>
  <adaptiveK>
    <enable>1</enable>
    <timeoutFrameCntThres>20</timeoutFrameCntThres>
    <filterSize>5</filterSize>
    <state0StableCntThres>3</state0StableCntThres>
    <state1StableCntThres>6</state1StableCntThres>
    <minimumLensPosDelta>100</minimumLensPosDelta>
    <state0ConfThres>200</state0ConfThres>
    <state1ConfThres>450</state1ConfThres>
    <state0PhaseDiffThres>6</state0PhaseDiffThres>
    <state1PhaseDiffThres>1</state1PhaseDiffThres>
    <tolNearTargetUpperBound>1.9</tolNearTargetUpperBound>
    <tolNearTargetLowerBound>0.4</tolNearTargetLowerBound>
    <tolFarTargetUpperBound>1.9</tolFarTargetUpperBound>
    <tolFarTargetLowerBound>0.4</tolFarTargetLowerBound>
  </adaptiveK>
  <enablePeripheralWindows>0</enablePeripheralWindows>
  <singleWindowProcessingLevel>
    <processingMode>PD_PROCESSING_MODE_MED</processingMode>
    <dynamicLevel>100</dynamicLevel>
    <staticLevel>100</staticLevel>
  </singleWindowProcessingLevel>
  <singleWindowProcessingLevelVertical>
    <processingMode>PD_PROCESSING_MODE_MED</processingMode>
    <dynamicLevel>100</dynamicLevel>
    <staticLevel>100</staticLevel>
  </singleWindowProcessingLevelVertical>
  <gridProcessingLevel>
    <processingMode>PD_PROCESSING_MODE_MED</processingMode>
    <dynamicLevel>100</dynamicLevel>
    <staticLevel>100</staticLevel>
  </gridProcessingLevel>
  <gridProcessingLevelVertical>
    <processingMode>PD_PROCESSING_MODE_MED</processingMode>
    <dynamicLevel>100</dynamicLevel>
    <staticLevel>100</staticLevel>
  </gridProcessingLevelVertical>
  <PeripheralProcessing>
    <processingMode>PD_PROCESSING_MODE_MED</processingMode>
    <dynamicLevel>100</dynamicLevel>
    <staticLevel>100</staticLevel>
  </PeripheralProcessing>
  <PeripheralProcessingVertical>
    <processingMode>PD_PROCESSING_MODE_MED</processingMode>
    <dynamicLevel>100</dynamicLevel>
    <staticLevel>100</staticLevel>
  </PeripheralProcessingVertical>
  <HVControl>
    <PDProcessingAxis>Horizontal</PDProcessingAxis>
    <horizontalConfWeightTuning>
      <weight>0.1</weight>
      <confThreshold>100</confThreshold>
    </horizontalConfWeightTuning>
    <horizontalConfWeightTuning>
      <weight>1</weight>
      <confThreshold>400</confThreshold>
    </horizontalConfWeightTuning>
    <horizontalConfWeightTuning>
      <weight>1</weight>
      <confThreshold>1000</confThreshold>
    </horizontalConfWeightTuning>
    <horizontalConfWeightTuning>
      <weight>100</weight>
      <confThreshold>1000</confThreshold>
    </horizontalConfWeightTuning>
    <verticalConfWeightTuning>
      <weight>0</weight>
      <confThreshold>50</confThreshold>
    </verticalConfWeightTuning>
    <verticalConfWeightTuning>
      <weight>0.9</weight>
      <confThreshold>500</confThreshold>
    </verticalConfWeightTuning>
  </HVControl>
  <skipControl>
    <staticFrameCountThres>8</staticFrameCountThres>
    <maxFrameRate>30</maxFrameRate>
  </skipControl>
  <hardwareGeometry>
    <enabldHardwarePDModule>0</enabldHardwarePDModule>
    <enableOverlap>1</enableOverlap>
    <numOfHoriGrids>2</numOfHoriGrids>
    <numOfVertGrids>2</numOfVertGrids>
    <horiNumOfRGNInGridUnit>2</horiNumOfRGNInGridUnit>
    <vertNumOfRGNInGridUnit>2</vertNumOfRGNInGridUnit>
    <horiRegionOffset>112</horiRegionOffset>
    <vertRegionOffset>42</vertRegionOffset>
    <widhtOfRegion>112</widhtOfRegion>
    <heightOfRegion>56</heightOfRegion>
    <horiNumOfRegion>16</horiNumOfRegion>
    <vertNumOfRegion>12</vertNumOfRegion>
  </hardwareGeometry>
  <hardwarePattern>
    <pixelExtractor>
        <enable>0</enable>
        <outputWidth>0</outputWidth>
        <outputHeight>0</outputHeight>
    </pixelExtractor>
    <lineExtractor>
      <XOffset>0</XOffset>
      <YOffset>0</YOffset>
      <HalfLine>false</HalfLine>
    </lineExtractor>
    <pixelSeparator>
      <inputBlockWidth>0</inputBlockWidth>
      <inputBlockHeight>0</inputBlockHeight>
      <outputBlockWidth>0</outputBlockWidth>
      <outputBlockHeight>0</outputBlockHeight>
      <L_map>0</L_map>
      <R_map>0</R_map>
    </pixelSeparator>
    <resampler>
      <enable>0</enable>
      <inputBlockWidth>0</inputBlockWidth>
      <inputBlockHeight>0</inputBlockHeight>
      <outputBlockWidth>0</outputBlockWidth>
      <outputBlockHeight>0</outputBlockHeight>
      <instructions>
          <S>0</S>
          <O>0</O>
      </instructions>
    </resampler>
      <gridWidthScaleRatio>0</gridWidthScaleRatio>
      <gridHeightScaleRatio>0</gridHeightScaleRatio>
  </hardwarePattern>
  <enableFocusMaps>0</enableFocusMaps>
  <extensionParam>
    <ID>0</ID>
    <Name>Extension feature</Name>
    <enableFlag>false</enableFlag>
    <data>0</data>
  </extensionParam>
</chromatixPDLib>
