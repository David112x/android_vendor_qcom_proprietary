<?xml version="1.0" encoding="utf-8" ?>
<!--
========================================================================
   Copyright(c) 2017-2019 Qualcomm Technologies, Inc.
   All Rights Reserved.
   Confidential and Proprietary - Qualcomm Technologies, Inc.
========================================================================
-->
<chromatixAFAlgoTuning
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:noNamespaceSchemaLocation="..\..\xsd\stats\af\afalgotuningelements.xsd">
  <module_version major_revision="9" minor_revision="0" incr_revision="0"/>
  <parameter_version>
    <revision>"A"</revision>
  </parameter_version>
  <commonElements>
    <positionNearEnd>0</positionNearEnd>
    <positionDefaultInMacro>160</positionDefaultInMacro>
    <positionBoundary>312</positionBoundary>
    <positionDefaultInNormal>341</positionDefaultInNormal>
    <positionFarEnd>399</positionFarEnd>
    <positionNormalHyperfocal>360</positionNormalHyperfocal>
    <positionMacroRegion>218</positionMacroRegion>
    <lowLightGainThreshold>10</lowLightGainThreshold>
  </commonElements>
  <FOVCorrection>
    <enable>0</enable>
    <fudgeFactor>1</fudgeFactor>
    <anchorLensPosition1>2</anchorLensPosition1>
    <anchorLensPosition2>10</anchorLensPosition2>
    <anchorDistanceMM1>100</anchorDistanceMM1>
    <anchorDistanceMM2>2000</anchorDistanceMM2>
    <focusConvergeStepSizeBrightLight>8</focusConvergeStepSizeBrightLight>
    <fineSearchStepSizeBrightLight>6</fineSearchStepSizeBrightLight>
    <focusConvergeStepSizeLowLight>9</focusConvergeStepSizeLowLight>
    <fineSearchStepSizeLowLight>7</fineSearchStepSizeLowLight>
  </FOVCorrection>
  <searchLimit>
    <enable>0</enable>
    <nearEnd>0</nearEnd>
    <farEnd>399</farEnd>
    <defaultPosition>375</defaultPosition>
  </searchLimit>
  <searchLimit>
    <enable>0</enable>
    <nearEnd>0</nearEnd>
    <farEnd>399</farEnd>
    <defaultPosition>375</defaultPosition>
  </searchLimit>
  <searchLimit>
    <enable>0</enable>
    <nearEnd>0</nearEnd>
    <farEnd>399</farEnd>
    <defaultPosition>375</defaultPosition>
  </searchLimit>
  <searchLimit>
    <enable>0</enable>
    <nearEnd>0</nearEnd>
    <farEnd>399</farEnd>
    <defaultPosition>375</defaultPosition>
  </searchLimit>
  <searchLimit>
    <enable>0</enable>
    <nearEnd>0</nearEnd>
    <farEnd>399</farEnd>
    <defaultPosition>375</defaultPosition>
  </searchLimit>
  <faceDetection>
    <faceDetectionPriority>
      <positionChangeThreshold>3</positionChangeThreshold>
      <positionStableThresholdHigh>0.5</positionStableThresholdHigh>
      <positionStableThresholdLow>0.4</positionStableThresholdLow>
      <sizeChangeThreshold>4</sizeChangeThreshold>
      <oldNewSizeDifferenceThreshold>2</oldNewSizeDifferenceThreshold>
      <stableCountSize>8</stableCountSize>
      <stableCountPosition>8</stableCountPosition>
      <noFaceWaitThreshold>3</noFaceWaitThreshold>
      <fpsAdjustmentThreshold>15</fpsAdjustmentThreshold>
    </faceDetectionPriority>
    <faceROIExtension>
      <ROIFaceExtensionEnable>0</ROIFaceExtensionEnable>
      <ROIFaceScaleX>0.05</ROIFaceScaleX>
      <ROIFaceScaleY>0.5</ROIFaceScaleY>
      <ROIFaceSymmetricX>0.5</ROIFaceSymmetricX>
      <ROIFaceSymmetricY>0.25</ROIFaceSymmetricY>
    </faceROIExtension>
    <faceDetectionROITuning>
      <FDROITune>0</FDROITune>
      <FDROIRatio>1</FDROIRatio>
    </faceDetectionROITuning>
    <faceDetection>
      <robustFaceDetectEnable>0</robustFaceDetectEnable>
      <nofaceCountThreshold>900</nofaceCountThreshold>
      <stableCountThreshold>90</stableCountThreshold>
      <faceDetectionROIPositionChangeThreshold>10</faceDetectionROIPositionChangeThreshold>
      <faceLostTriggerEnable>0</faceLostTriggerEnable>
      <faceLostStableThreshold>30</faceLostStableThreshold>
    </faceDetection>
    <faceHVWeight>
      <enable>false</enable>
      <hWeight>0</hWeight>
    </faceHVWeight>
    <faceFarEnd>
      <enable>0</enable>
      <farEnd>0</farEnd>
    </faceFarEnd>
  </faceDetection>
  <statsROIProcess>
    <ROIProcessEnable>1</ROIProcessEnable>
    <statsROIPriority>
      <dominantScoreEnhancement>0.2</dominantScoreEnhancement>
      <FaceROISizeWeight>
        <triggerPt>
          <start>0</start>
          <end>0</end>
        </triggerPt>
        <triggerData>
          <triggerPt>
            <start>0.2</start>
            <end>0.2</end>
          </triggerPt>
          <triggerData>
            <data>0.2</data>
          </triggerData>
        </triggerData>
        <triggerData>
          <triggerPt>
            <start>0.5</start>
            <end>0.5</end>
          </triggerPt>
          <triggerData>
            <data>0.6</data>
          </triggerData>
        </triggerData>
        <triggerData>
          <triggerPt>
            <start>0.8</start>
            <end>0.8</end>
          </triggerPt>
          <triggerData>
            <data>1</data>
          </triggerData>
        </triggerData>
      </FaceROISizeWeight>
      <FaceROILocationWeight>
        <triggerPt>
          <start>0</start>
          <end>0</end>
        </triggerPt>
        <triggerData>
          <triggerPt>
            <start>0.2</start>
            <end>0.2</end>
          </triggerPt>
          <triggerData>
            <data>0.9</data>
          </triggerData>
        </triggerData>
        <triggerData>
          <triggerPt>
            <start>0.4</start>
            <end>0.4</end>
          </triggerPt>
          <triggerData>
            <data>0.6</data>
          </triggerData>
        </triggerData>
        <triggerData>
          <triggerPt>
            <start>0.6</start>
            <end>0.6</end>
          </triggerPt>
          <triggerData>
            <data>0.3</data>
          </triggerData>
        </triggerData>
        <triggerData>
          <triggerPt>
            <start>0.8</start>
            <end>0.8</end>
          </triggerPt>
          <triggerData>
            <data>0.1</data>
          </triggerData>
        </triggerData>
        <triggerData>
          <triggerPt>
            <start>1</start>
            <end>1</end>
          </triggerPt>
          <triggerData>
            <data>0</data>
          </triggerData>
        </triggerData>
      </FaceROILocationWeight>
    </statsROIPriority>
    <trackROIPriority>
      <dominantScoreEnhancement>0.2</dominantScoreEnhancement>
      <FaceROISizeWeight>
        <triggerPt>
          <start>0</start>
          <end>0</end>
        </triggerPt>
        <triggerData>
          <triggerPt>
            <start>0.2</start>
            <end>0.2</end>
          </triggerPt>
          <triggerData>
            <data>0.2</data>
          </triggerData>
        </triggerData>
        <triggerData>
          <triggerPt>
            <start>0.5</start>
            <end>0.5</end>
          </triggerPt>
          <triggerData>
            <data>0.6</data>
          </triggerData>
        </triggerData>
        <triggerData>
          <triggerPt>
            <start>0.8</start>
            <end>0.8</end>
          </triggerPt>
          <triggerData>
            <data>1</data>
          </triggerData>
        </triggerData>
      </FaceROISizeWeight>
      <FaceROILocationWeight>
        <triggerPt>
          <start>0</start>
          <end>0</end>
        </triggerPt>
        <triggerData>
          <triggerPt>
            <start>0.2</start>
            <end>0.2</end>
          </triggerPt>
          <triggerData>
            <data>0.9</data>
          </triggerData>
        </triggerData>
        <triggerData>
          <triggerPt>
            <start>0.4</start>
            <end>0.4</end>
          </triggerPt>
          <triggerData>
            <data>0.6</data>
          </triggerData>
        </triggerData>
        <triggerData>
          <triggerPt>
            <start>0.6</start>
            <end>0.6</end>
          </triggerPt>
          <triggerData>
            <data>0.3</data>
          </triggerData>
        </triggerData>
        <triggerData>
          <triggerPt>
            <start>0.8</start>
            <end>0.8</end>
          </triggerPt>
          <triggerData>
            <data>0.1</data>
          </triggerData>
        </triggerData>
        <triggerData>
          <triggerPt>
            <start>1</start>
            <end>1</end>
          </triggerPt>
          <triggerData>
            <data>0</data>
          </triggerData>
        </triggerData>
      </FaceROILocationWeight>
    </trackROIPriority>
  </statsROIProcess>
  <orientationDetection>
    <gravityXLandscapeThreshold>0</gravityXLandscapeThreshold>
    <gravityYLandscapeThreshold>0</gravityYLandscapeThreshold>
    <gravityXPortraitThreshold>0</gravityXPortraitThreshold>
    <gravityYPortraitThreshold>0</gravityYPortraitThreshold>
  </orientationDetection>
  <outdoorROIConfiguration>
    <EnableOutdoorROITune>0</EnableOutdoorROITune>
    <OutdoorROIRatioX>0</OutdoorROIRatioX>
    <OutdoorROIRatioY>0</OutdoorROIRatioY>
  </outdoorROIConfiguration>
  <moduleTuning>
    <lensSagCompensation>
      <enable>0</enable>
      <fDAC>100</fDAC>
      <fDAC>160</fDAC>
      <fDAC>45</fDAC>
      <fDistance>1.2</fDistance>
      <triggerThreshold>0.15</triggerThreshold>
    </lensSagCompensation>
    <enableHysteresisOffset>0</enableHysteresisOffset>
    <chromatixHysteresisOffset>0</chromatixHysteresisOffset>
  </moduleTuning>
  <setInvalidFrame>0</setInvalidFrame>
  <handJitter>
    <AFSingle>
      <enable>false</enable>
      <maxFVInBeginning>0</maxFVInBeginning>
      <coarseSearch>
        <minSampleSize>5</minSampleSize>
        <currentGyroscopeThreshold>0.16</currentGyroscopeThreshold>
        <currentGyroscopeSTDThreshold>0.05</currentGyroscopeSTDThreshold>
        <gyroscopeThresholdForDifferenceRatio>0.25</gyroscopeThresholdForDifferenceRatio>
        <gyroscodeDifferenceRatioThreshold>1.1</gyroscodeDifferenceRatioThreshold>
      </coarseSearch>
      <fineSearch>
        <minSampleSize>3</minSampleSize>
        <currentGyroscopeThreshold>0.15</currentGyroscopeThreshold>
        <currentGyroscopeSTDThreshold>0.05</currentGyroscopeSTDThreshold>
        <gyroscopeThresholdForDifferenceRatio>0.016</gyroscopeThresholdForDifferenceRatio>
        <gyroscodeDifferenceRatioThreshold>1.1</gyroscodeDifferenceRatioThreshold>
        <FVNormalized>
          <enable>true</enable>
          <highGyroscopeDifferenceThreshold>0.08</highGyroscopeDifferenceThreshold>
          <lowGyroscopeDifferenceThreshold>0.03</lowGyroscopeDifferenceThreshold>
          <highGryoscopeFVWeight>0.7</highGryoscopeFVWeight>
          <weightType>0</weightType>
        </FVNormalized>
      </fineSearch>
      <redoRateThreshold>0.6</redoRateThreshold>
      <handleNeedCount>1</handleNeedCount>
      <resetDataBeforeFineSearch>true</resetDataBeforeFineSearch>
      <workingExposureIndex>280</workingExposureIndex>
    </AFSingle>
    <HAFFineSearch>
      <enable>false</enable>
      <fineSearch>
        <minSampleSize>3</minSampleSize>
        <currentGyroscopeThreshold>0.15</currentGyroscopeThreshold>
        <currentGyroscopeSTDThreshold>0.05</currentGyroscopeSTDThreshold>
        <gyroscopeThresholdForDifferenceRatio>0.025</gyroscopeThresholdForDifferenceRatio>
        <gyroscodeDifferenceRatioThreshold>1</gyroscodeDifferenceRatioThreshold>
        <FVNormalized>
          <enable>true</enable>
          <highGyroscopeDifferenceThreshold>0.1</highGyroscopeDifferenceThreshold>
          <lowGyroscopeDifferenceThreshold>0.04</lowGyroscopeDifferenceThreshold>
          <highGryoscopeFVWeight>0.7</highGryoscopeFVWeight>
          <weightType>0</weightType>
        </FVNormalized>
      </fineSearch>
      <handleNeedCount>1</handleNeedCount>
      <workingExposureIndex>280</workingExposureIndex>
    </HAFFineSearch>
    <samplingRate>200</samplingRate>
    <reportingRate>60</reportingRate>
  </handJitter>
  <spotlightDetection>
    <enable>false</enable>
    <statsType>1</statsType>
    <bgStatsThreshAutoConvertEnable>1</bgStatsThreshAutoConvertEnable>
    <bgStatsBrightRegionSatRatioThresh>0.3</bgStatsBrightRegionSatRatioThresh>
    <far_flat_th>0.55</far_flat_th>
    <marco_flat_th>0.85</marco_flat_th>
    <inc_flat_th>1.035</inc_flat_th>
    <dec_flat_th>0.978</dec_flat_th>
    <spotlight_zone_start_h>4</spotlight_zone_start_h>
    <spotlight_zone_end_h>12</spotlight_zone_end_h>
    <spotlight_zone_start_v>4</spotlight_zone_start_v>
    <spotlight_zone_end_v>12</spotlight_zone_end_v>
    <background_zone_start_h>2</background_zone_start_h>
    <background_zone_end_h>14</background_zone_end_h>
    <background_zone_start_v>2</background_zone_start_v>
    <background_zone_end_v>14</background_zone_end_v>
    <exposure_index_trigger_th>200</exposure_index_trigger_th>
    <background_luma_avg_th>40</background_luma_avg_th>
    <region_low_grey_th>30</region_low_grey_th>
    <region_low_dark_th>10</region_low_dark_th>
    <background_low_grey_pct_th>0.65</background_low_grey_pct_th>
    <background_dark_grey_pct_th>0.25</background_dark_grey_pct_th>
    <bright_region_luma_delta_background_zone>2</bright_region_luma_delta_background_zone>
    <bright_region_luma_delta_spotlight_zone_low_grey>2.5</bright_region_luma_delta_spotlight_zone_low_grey>
    <bright_region_luma_delta_spotlight_zone_dark_grey>3</bright_region_luma_delta_spotlight_zone_dark_grey>
    <square_cluster_inc_size>1</square_cluster_inc_size>
    <vertical_cluster_inc_size>2</vertical_cluster_inc_size>
    <horizontal_cluster_inc_size>2</horizontal_cluster_inc_size>
    <square_cluster_pct_th>0.8</square_cluster_pct_th>
    <vertical_cluster_pct_th>0.2</vertical_cluster_pct_th>
    <horizontal_cluster_pct_th>0.2</horizontal_cluster_pct_th>
    <spotlight_detect_cnt_th>3</spotlight_detect_cnt_th>
  </spotlightDetection>
  <distanceMapControl>
    <useOTPData>false</useOTPData>
  </distanceMapControl>
  <focusMapControl>
    <enable>false</enable>
    <resolution>
      <width>20</width>
      <height>20</height>
    </resolution>
    <defocusTable>
      <triggerMode>LensPosition</triggerMode>
      <triggerEntries>
        <triggerPoint>0</triggerPoint>
        <defocusThreshold>20</defocusThreshold>
      </triggerEntries>
      <triggerEntries>
        <triggerPoint>200</triggerPoint>
        <defocusThreshold>15</defocusThreshold>
      </triggerEntries>
      <triggerEntries>
        <triggerPoint>400</triggerPoint>
        <defocusThreshold>10</defocusThreshold>
      </triggerEntries>
    </defocusTable>
    <confidenceTable>
      <triggerMode>AECGain</triggerMode>
      <triggerEntries>
        <triggerPoint>0</triggerPoint>
        <confidenceThreshold>300</confidenceThreshold>
      </triggerEntries>
      <triggerEntries>
        <triggerPoint>6</triggerPoint>
        <confidenceThreshold>500</confidenceThreshold>
      </triggerEntries>
      <triggerEntries>
        <triggerPoint>12</triggerPoint>
        <confidenceThreshold>600</confidenceThreshold>
      </triggerEntries>
    </confidenceTable>
  </focusMapControl>
</chromatixAFAlgoTuning>
