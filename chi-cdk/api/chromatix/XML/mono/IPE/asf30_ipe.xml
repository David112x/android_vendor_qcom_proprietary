<?xml version="1.0" encoding="utf-8" ?>
<!--
========================================================================
   Copyright (c) 2018-2019 Qualcomm Technologies, Inc.
   All Rights Reserved.
   Confidential and Proprietary - Qualcomm Technologies, Inc.
========================================================================
-->
<asf30_ipe
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:noNamespaceSchemaLocation="..\..\..\Schema\Mainline\isp\asf_3_0_0.xsd">
  <enable_section>
    <asf_enable>1</asf_enable>
    <skin_enable type="int" range="[0,1]" length="1">0</skin_enable>
    <chroma_gradient_enable type="int" range="[0,1]" length="1">0</chroma_gradient_enable>
  </enable_section>
  <module_version major_revision="3" minor_revision="0" incr_revision="0"/>
  <parameter_version>
    <revision>0</revision>
  </parameter_version>
  <control_variables>
    <control_var_type>control_total_scale_ratio</control_var_type>
    <control_var_type>control_drc_gain</control_var_type>
    <control_var_type>control_aec_exp_sensitivity_ratio</control_var_type>
    <control_var_type>control_gain</control_var_type>
  </control_variables>
  <control_method>
    <aec_exp_control>control_gain</aec_exp_control>
    <aec_hdr_control>control_aec_exp_sensitivity_ratio</aec_hdr_control>
  </control_method>
  <dynamic_enable_triggers>
    <asf_enable>
      <enable type="int" range="[0,1]" length="1">0</enable>
      <hyst_control_var type="uint" range="[0,1]" length="1">control_gain</hyst_control_var>
      <hyst_mode>UPWARD</hyst_mode>
      <hyst_trigger>
        <start1>0.9</start1>
        <end1>0.91</end1>
        <start2>0.9</start2>
        <end2>0.91</end2>
      </hyst_trigger>
    </asf_enable>
  </dynamic_enable_triggers>
  <chromatix_asf30_reserve>
    <radial_anchor_tab type="float" range="[0.0,1.0]" length="4">
      <radial_anchor>0.4 0.6 0.8 1</radial_anchor>
    </radial_anchor_tab>
    <face_enable type="int" range="[0,1]" length="1">0</face_enable>
    <edge_alignment_enable type="int" range="[0,1]" length="1">1</edge_alignment_enable>
    <layer_1_enable type="int" range="[0,1]" length="1">1</layer_1_enable>
    <layer_2_enable type="int" range="[0,1]" length="1">1</layer_2_enable>
    <radial_enable type="int" range="[0,1]" length="1">1</radial_enable>
    <contrast_enable type="int" range="[0,1]" length="1">1</contrast_enable>
  </chromatix_asf30_reserve>
  <chromatix_asf30_core>
    <mod_asf30_total_scale_ratio_data>
      <total_scale_ratio_trigger>
        <start>1</start>
        <end>100</end>
      </total_scale_ratio_trigger>
      <total_scalor_ratio_data>
        <mod_asf30_drc_gain_data>
          <drc_gain_trigger>
            <start>1</start>
            <end>100</end>
          </drc_gain_trigger>
          <drc_gain_data>
            <mod_asf30_hdr_aec_data>
              <hdr_aec_trigger>
                <exp_time_start>1</exp_time_start>
                <exp_time_end>16</exp_time_end>
                <aec_sensitivity_start>1</aec_sensitivity_start>
                <aec_sensitivity_end>16</aec_sensitivity_end>
                <exp_gain_start>1</exp_gain_start>
                <exp_gain_end>16</exp_gain_end>
              </hdr_aec_trigger>
              <hdr_aec_data>
                <mod_asf30_aec_data>
                  <aec_trigger>
                    <lux_idx_start>1</lux_idx_start>
                    <lux_idx_end>900</lux_idx_end>
                    <gain_start>1</gain_start>
                    <gain_end>200</gain_end>
                  </aec_trigger>
                  <asf30_rgn_data>
                    <layer_1_hpf_symmetric_coeff_tab type="int" range="[[-511,511],[-511,511],[-511,511],[-511,511],[-511,511],[-511,511],[-511,511],[-511,511],[-1023,1023],[-2047,2047]]" length="10">
                      <layer_1_hpf_symmetric_coeff>0 0 0 -1 -2 -25 -86 -173 -180 1968</layer_1_hpf_symmetric_coeff>
                    </layer_1_hpf_symmetric_coeff_tab>
                    <layer_1_lpf_symmetric_coeff_tab type="int" range="[[-511,511],[-511,511],[-511,511],[-511,511],[-511,511],[-511,511],[-511,511],[-511,511],[-1023,1023],[-2047,2047]]" length="10">
                      <layer_1_lpf_symmetric_coeff>4 8 12 16 16 24 32 36 48 64</layer_1_lpf_symmetric_coeff>
                    </layer_1_lpf_symmetric_coeff_tab>
                    <layer_1_activity_band_pass_coeff_tab type="int" range="[[-127,127],[-127,127],[-127,127],[-127,127],[-255,255],[-511,511]]" length="6">
                      <layer_1_activity_band_pass_coeff>-4 -16 -24 0 32 112</layer_1_activity_band_pass_coeff>
                    </layer_1_activity_band_pass_coeff_tab>
                    <layer_1_activity_normalization_lut_tab type="float" range="[0.0,0.99609375]" length="64">
                      <layer_1_activity_normalization_lut>0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996</layer_1_activity_normalization_lut>
                    </layer_1_activity_normalization_lut_tab>
                    <layer_1_weight_modulation_lut_tab type="float" range="[0.0,0.99609375]" length="64">
                      <layer_1_weight_modulation_lut>0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996</layer_1_weight_modulation_lut>
                    </layer_1_weight_modulation_lut_tab>
                    <layer_1_soft_threshold_lut_tab type="uint" range="[0,255]" length="64">
                      <layer_1_soft_threshold_lut>255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255</layer_1_soft_threshold_lut>
                    </layer_1_soft_threshold_lut_tab>
                    <layer_1_gain_positive_lut_tab type="float" range="[0.0,7.96875]" length="64">
                      <layer_1_gain_positive_lut>1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65</layer_1_gain_positive_lut>
                    </layer_1_gain_positive_lut_tab>
                    <layer_1_gain_negative_lut_tab type="float" range="[0.0,7.96875]" length="64">
                      <layer_1_gain_negative_lut>1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65 1.65</layer_1_gain_negative_lut>
                    </layer_1_gain_negative_lut_tab>
                    <layer_1_gain_weight_lut_tab type="float" range="[0.0,0.99609375]" length="64">
                      <layer_1_gain_weight_lut>0.5 0.5419 0.6475 0.7719 0.8752 0.9414 0.9753 0.9894 0.9943 0.9956 0.9959 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996</layer_1_gain_weight_lut>
                    </layer_1_gain_weight_lut_tab>
                    <layer_1_gamma_corrected_luma_target type="int" range="[0,255]" length="1">128</layer_1_gamma_corrected_luma_target>
                    <layer_1_gain_cap type="float" range="[0.0,7.96875]" length="1">7.9</layer_1_gain_cap>
                    <layer_1_clamp_ul type="int" range="[-255,255]" length="1">128</layer_1_clamp_ul>
                    <layer_1_clamp_ll type="int" range="[-255,255]" length="1">-128</layer_1_clamp_ll>
                    <layer_1_norm_scale type="float" range="[0.0,3.984375]" length="1">3.98</layer_1_norm_scale>
                    <layer_1_activity_clamp_threshold type="int" range="[0,255]" length="1">255</layer_1_activity_clamp_threshold>
                    <layer_1_l2_norm_en type="int" range="[0,1]" length="1">0</layer_1_l2_norm_en>
                    <layer_1_median_blend_upper_offset type="float" range="[0,0.9375]" length="1">0</layer_1_median_blend_upper_offset>
                    <layer_1_median_blend_lower_offset type="float" range="[0,0.9375]" length="1">0</layer_1_median_blend_lower_offset>
                    <layer_1_sp type="uint" range="[0,100]" length="1">0</layer_1_sp>
                    <layer_2_hpf_symmetric_coeff_tab type="int" range="[[-127,127],[-127,127],[-127,127],[-127,127],[-255,255],[-511,511]]" length="6">
                      <layer_2_hpf_symmetric_coeff>-1 -4 -6 -16 -24 220</layer_2_hpf_symmetric_coeff>
                    </layer_2_hpf_symmetric_coeff_tab>
                    <layer_2_lpf_symmetric_coeff_tab type="int" range="[[-127,127],[-127,127],[-127,127],[-127,127],[-255,255],[-511,511]]" length="6">
                      <layer_2_lpf_symmetric_coeff>4 16 24 64 96 144</layer_2_lpf_symmetric_coeff>
                    </layer_2_lpf_symmetric_coeff_tab>
                    <layer_2_activity_band_pass_coeff_tab type="int" range="[[-127,127],[-127,127],[-127,127],[-127,127],[-255,255],[-511,511]]" length="6">
                      <layer_2_activity_band_pass_coeff>-4 -16 -24 0 32 112</layer_2_activity_band_pass_coeff>
                    </layer_2_activity_band_pass_coeff_tab>
                    <layer_2_activity_normalization_lut_tab type="float" range="[0,0.99609375]" length="64">
                      <layer_2_activity_normalization_lut>0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996</layer_2_activity_normalization_lut>
                    </layer_2_activity_normalization_lut_tab>
                    <layer_2_weight_modulation_lut_tab type="float" range="[0,0.99609375]" length="64">
                      <layer_2_weight_modulation_lut>0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996</layer_2_weight_modulation_lut>
                    </layer_2_weight_modulation_lut_tab>
                    <layer_2_soft_threshold_lut_tab type="uint" range="[0,255]" length="64">
                      <layer_2_soft_threshold_lut>255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255</layer_2_soft_threshold_lut>
                    </layer_2_soft_threshold_lut_tab>
                    <layer_2_gain_positive_lut_tab type="float" range="[0,7.96875]" length="64">
                      <layer_2_gain_positive_lut>0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55</layer_2_gain_positive_lut>
                    </layer_2_gain_positive_lut_tab>
                    <layer_2_gain_negative_lut_tab type="float" range="[0,7.96875]" length="64">
                      <layer_2_gain_negative_lut>0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55 0.55</layer_2_gain_negative_lut>
                    </layer_2_gain_negative_lut_tab>
                    <layer_2_gain_weight_lut_tab type="float" range="[0,0.99609375]" length="64">
                      <layer_2_gain_weight_lut>0.5 0.5419 0.6475 0.7719 0.8752 0.9414 0.9753 0.9894 0.9943 0.9956 0.9959 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996 0.996</layer_2_gain_weight_lut>
                    </layer_2_gain_weight_lut_tab>
                    <layer_2_clamp_ul type="int" range="[-255,255]" length="1">128</layer_2_clamp_ul>
                    <layer_2_clamp_ll type="int" range="[-255,255]" length="1">-128</layer_2_clamp_ll>
                    <layer_2_norm_scale type="float" range="[0,3.984375]" length="1">3.98</layer_2_norm_scale>
                    <layer_2_activity_clamp_threshold type="int" range="[0,255]" length="1">255</layer_2_activity_clamp_threshold>
                    <layer_2_l2_norm_en type="int" range="[0,1]" length="1">0</layer_2_l2_norm_en>
                    <radial_activity_adj_tab type="float" range="[0,7.96875]" length="4">
                      <radial_activity_adj>1 1 1 1</radial_activity_adj>
                    </radial_activity_adj_tab>
                    <radial_gain_adj_tab type="float" range="[0,7.96875]" length="4">
                      <radial_gain_adj>1 1 1 1</radial_gain_adj>
                    </radial_gain_adj_tab>
                    <skin_hue_min type="float" range="[-3.0,-1.0]" length="1">-1.7</skin_hue_min>
                    <skin_hue_max type="float" range="[-0.99609375,0.99609375]" length="1">-0.5</skin_hue_max>
                    <skin_y_min type="float" range="[0,0.99609375]" length="1">0.1</skin_y_min>
                    <skin_y_max type="float" range="[0,0.99609375]" length="1">0.9</skin_y_max>
                    <skin_saturation_min_ymax type="float" range="[0,1.0]" length="1">0.05</skin_saturation_min_ymax>
                    <skin_saturation_max_ymax type="float" range="[0,1.0]" length="1">0.25</skin_saturation_max_ymax>
                    <skin_saturation_min_ymin type="float" range="[0.0,0.5]" length="1">0.25</skin_saturation_min_ymin>
                    <skin_saturation_max_ymin type="float" range="[0.2,0.99609375]" length="1">0.65</skin_saturation_max_ymin>
                    <skin_boundary_probability type="uint" range="[1,15]" length="1">8</skin_boundary_probability>
                    <skin_percent type="float" range="[0,100]" length="1">12</skin_percent>
                    <skin_nonskin_to_skin_qratio type="float" range="[0.1,10.0]" length="1">0.5</skin_nonskin_to_skin_qratio>
                    <flat_thresold type="int" range="[0,25]" length="1">8</flat_thresold>
                    <max_smoothing_clamp type="int" range="[0,25]" length="1">8</max_smoothing_clamp>
                    <corner_threshold type="float" range="[0,63.9990234375]" length="1">2</corner_threshold>
                    <smoothing_strength type="float" range="[0,0.9990234375]" length="1">0.5</smoothing_strength>
                    <gain_contrast_positive_tab type="float" range="[0.00390625,1]" length="32">
                      <gain_contrast_positive>1 1 1 1 1 1 1 0.9375 0.875 0.8125 0.75 0.6875 0.625 0.5625 0.5 0.4375 0.375 0.3125 0.25 0.25 0.25 0.25 0.25 0.25 0.25 0.25 0.25 0.25 0.25 0.25 0.25 0.25</gain_contrast_positive>
                    </gain_contrast_positive_tab>
                    <gain_contrast_negative_tab type="float" range="[0.00390625,1]" length="32">
                      <gain_contrast_negative>1 1 1 1 1 1 1 0.9375 0.875 0.8125 0.75 0.6875 0.625 0.5625 0.5 0.4375 0.375 0.3125 0.25 0.25 0.25 0.25 0.25 0.25 0.25 0.25 0.25 0.25 0.25 0.25 0.25 0.25</gain_contrast_negative>
                    </gain_contrast_negative_tab>
                    <skin_gain_tab type="float" range="[0.00390625,1]" length="17">
                      <skin_gain>1 1 1 0.9531 0.9063 0.8594 0.8125 0.7656 0.7188 0.7188 0.7188 0.7188 0.7188 0.7188 0.7188 0.7188 0.7188</skin_gain>
                    </skin_gain_tab>
                    <skin_activity_tab type="float" range="[0.00390625,1]" length="17">
                      <skin_activity>1 0.9688 0.9375 0.9063 0.875 0.8438 0.8125 0.7813 0.75 0.7188 0.6875 0.6563 0.625 0.5938 0.5625 0.5313 0.5</skin_activity>
                    </skin_activity_tab>
                    <gain_chroma_positive_tab type="float" range="[0.00390625,1]" length="32">
                      <gain_chroma_positive>1 1 1 1 1 1 1 0.9375 0.875 0.8125 0.75 0.6875 0.625 0.5625 0.5 0.4375 0.375 0.3125 0.25 0.25 0.25 0.25 0.25 0.25 0.25 0.25 0.25 0.25 0.25 0.25 0.25 0.25</gain_chroma_positive>
                    </gain_chroma_positive_tab>
                    <gain_chroma_negative_tab type="float" range="[0.00390625,1]" length="32">
                      <gain_chroma_negative>1 1 1 1 1 1 1 0.9375 0.875 0.8125 0.75 0.6875 0.625 0.5625 0.5 0.4375 0.375 0.3125 0.25 0.25 0.25 0.25 0.25 0.25 0.25 0.25 0.25 0.25 0.25 0.25 0.25 0.25</gain_chroma_negative>
                    </gain_chroma_negative_tab>
                    <face_boundary type="float" range="[0,8]" length="1">1.2</face_boundary>
                    <face_transition type="float" range="[0,8]" length="1">2</face_transition>
                  </asf30_rgn_data>
                </mod_asf30_aec_data>
              </hdr_aec_data>
            </mod_asf30_hdr_aec_data>
          </drc_gain_data>
        </mod_asf30_drc_gain_data>
      </total_scalor_ratio_data>
    </mod_asf30_total_scale_ratio_data>
  </chromatix_asf30_core>
</asf30_ipe>
